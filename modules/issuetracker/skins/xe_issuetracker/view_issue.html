<!--#include("header.html")-->

<div class="issuetrackerRead">

	<div class="issuetrackerReadHeader">

		<div class="titleArea">
			<h3 class="title"><a href="{$oIssue->getPermanentUrl()}">{$oIssue->getTitle()}</a></h3>
			<span class="sum">
				<span class="read">{$lang->readed_count} <span class="num">{$oIssue->get('readed_count')}</span></span>
				<span class="vote">{$lang->voted_count} <span class="num">{$oIssue->get('voted_count')}</span></span>
				<span class="date">{$oIssue->getRegdate('Y.m.d')} {$oIssue->getRegdate('H:i:s')}</span>
			</span>
		</div>
		<div class="authorArea">
			<!--@if(!$oIssue->getMemberSrl())-->
				<!--@if($oIssue->isExistsHomepage())-->
					<a href="{$oIssue->getHomepageUrl()}" onclick="window.open(this.href);return false;" class="author">{$oIssue->getNickName()}</a>
				<!--@else-->
					{$oIssue->getNickName()}
				<!--@end-->
			<!--@else-->
				<a href="#popup_menu_area" class="member_{$oIssue->get('member_srl')} author" onclick="return false">{$oIssue->getNickName()}</a>
			<!--@end-->
			<span class="ipAddress"><!--@if($grant->manager)-->{$oIssue->getIpaddress()}<!--@end--></span>
			<a href="{$oIssue->getPermanentUrl()}" class="permaLink">{$oIssue->getPermanentUrl()}</a>
		</div>

	</div>

    <table border="1" cellspacing="0" summary="Extra Form" class="extraVarsList">
    <!--@foreach($oIssue->getExtraVars() as $key => $val)-->
    <tr>
        <th>{$val->name}</th>
        <td>{$val->getValueHTML()}&nbsp;</td>
    </tr>
    <!--@end-->
    <!--@if(!$oIssue->isSecret() || $oIssue->isAccessible())-->
    <tr>
        <th>{$lang->milestone}</th>
        <td>{$oIssue->getMilestoneTitle()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->priority}</th>
        <td>{$oIssue->getPriorityTitle()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->type}</th>
        <td>{$oIssue->getTypeTitle()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->component}</th>
        <td>{$oIssue->getComponentTitle()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->status}</th>
        <td>{$oIssue->getStatus()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->assignee}</th>
        <td>
            <!--@if($oIssue->get('assignee_srl'))-->
                <span class="member_{$oIssue->get('assignee_srl')}">{$oIssue->get('assignee_name')}</span>
            <!--@else-->
                &nbsp;
            <!--@end-->
        </td>
    </tr>
    <!--@if(count($project->packages))-->
    <tr>
        <th>{$lang->package}</th>
        <td>{$oIssue->getPackageTitle()}&nbsp;</td>
    </tr>
    <tr>
        <th>{$lang->occured_version}</th>
        <td>{$oIssue->getReleaseTitle()}&nbsp;</td>
    </tr>
    <!--@end-->
    <!--@end-->
    </table>

	<div class="issuetrackerReadBody">
		<!--@if($oIssue->isSecret() && !$oIssue->isGranted())-->
			<form action="./" method="get" onsubmit="return procFilter(this, input_password)" class="secretMessage">
			<input type="hidden" name="mid" value="{$mid}" />
			<input type="hidden" name="page" value="{$page}" />
			<input type="hidden" name="document_srl" value="{$oIssue->document_srl}" />

				<p>&quot;{$lang->msg_is_secret}&quot;</p>
				<dl>
					<dt><label for="cpw">{$lang->password}</label> :</dt>
					<dd><input type="password" name="password" id="cpw" class="inputText" /><span class="buttonOfficial"><input type="submit" value="{$lang->cmd_input}" /></span></dd>
				</dl>

			</form>
		<!--@else-->
			{$oIssue->getContent(false,true)}
		<!--@end-->
	</div>

	<div class="issuetrackerReadFooter">
	
        <!--@if($oIssue->getProfileImage() || $oIssue->getSignature())-->
			<div class="memberSignature">
			<!--@if($oIssue->getProfileImage())-->
				<img src="{$oIssue->getProfileImage()}" alt="profile" class="profile" align="left" />
			<!--@end-->
			<!--@if($oIssue->getSignature())-->
				{$oIssue->getSignature()}
			<!--@end-->
			</div>
		<!--@end-->
		
		{@ $tag_list = $oIssue->get('tag_list') }
		<!--@if(count($tag_list))-->
		<dl class="tag">
			<dt><img src="./img/common/iconTag.gif" width="27" height="11" alt="{$lang->tag}" /></dt>
			<!--@for($i=0;$i<count($tag_list);$i++)-->
				{@ $tag = $tag_list[$i]; }
				<dd><a href="{getUrl('search_target','tag','search_keyword',$tag,'document_srl','')}" rel="tag">{htmlspecialchars($tag)}</a></dd>
			<!--@end-->
		</dl>
		<!--@end-->
		
		<!--@if($oIssue->hasUploadedFiles() && !$oIssue->isSecret() && $oIssue->isAccessible())-->
        <dl class="attachedFile">
            <dt><img src="./img/common/iconFiles.gif" width="27" height="11" alt="{$lang->uploaded_file}" /> <button type="button" class="fileToggle" onclick="jQuery(this).parents('dl.attachedFile').toggleClass('open');return false;">{$lang->uploaded_file} ({$oIssue->get('uploaded_count')})</button></dt>
            <dd>
                <ul class="files">
                    {@ $uploaded_list = $oIssue->getUploadedFiles() }
                    <!--@foreach($uploaded_list as $key => $file)-->
                    <li><a href="{getUrl('')}{$file->download_url}">{$file->source_filename} <span class="bubble">[File Size:{FileHandler::filesize($file->file_size)}/Download:{number_format($file->download_count)}]</span></a></li>
                    <!--@end-->
                </ul>
            </dd>
        </dl>
		<!--@end-->
        
        <!--@if(!$oIssue->getTrackbackCount())-->
		<dl class="trackbackURL">
			<dt>{$lang->trackback} </dt>
			<dd><a href="{$oIssue->getTrackbackUrl()}" onclick="return false;">{$oIssue->getTrackbackUrl()}</a></dd>
		</dl>
        <!--@end-->
		
	</div>

    <div class="issuetrackerNavigation">
        <div class="buttonLeft">
			<a href="{getUrl('document_srl','')}" class="buttonOfficial"><span>{$lang->cmd_list}</span></a>
		</div>
		
        <!--@if($oIssue->isGranted())-->
		<div class="buttonRight">
            <a href="{getUrl('act','dispIssuetrackerDeleteIssue')}" class="buttonOfficial"><span>{$lang->cmd_delete}</span></a>
            <a href="{getUrl('act','dispIssuetrackerNewIssue')}" class="buttonOfficial"><span>{$lang->cmd_modify}</span></a>
		</div>
        <!--@end-->
    </div>
</div>

<!--@if($oIssue->allowTrackback())-->
<a name="trackback"></a>
<!--#include("./trackback.html")-->
<!--@end-->

<!--@if($oIssue->allowComment())-->
<a name="comment"></a>
<!--#include("./comment.html")-->

<!--@if($grant->ticket_write || $grant->commiter)-->
<form action="./" method="post" onsubmit="return procFilter(this, insert_history)" class="issuetrackerEditor" >
<input type="hidden" name="mid" value="{$mid}" />
<input type="hidden" name="target_srl" value="{$oIssue->get('target_srl')}" />
<input type="hidden" name="history_srl" value="" />
<input type="hidden" name="content" value="" />
    <div class="issuetrackerWrite commentEditor">

        <!--@if($grant->commiter)-->
        <table border="1" cellspacing="0" summary="Extra Form" class="extraVarsList">
        <tr>
            <th><label for="inputMilestone">{$lang->milestone}</label></th>
            <td>
                <select name="milestone_srl" id="inputMilestone">
                    <option value="0">{$lang->milestone}</option>
                <!--@foreach($project->milestones as $val)-->
                    <option value="{$val->milestone_srl}" <!--@if($oIssue->get('milestone_srl')==$val->milestone_srl)-->selected="selected"<!--@end-->>{$val->title}</option>
                <!--@end-->
                </select>
            </td>
        </tr>
        <tr>
            <th><label for="inputPriority">{$lang->priority}</label></th>
            <td>
                <select name="priority_srl" id="inputPriority">
                    <option value="">{$lang->priority}</option>
                    <!--@foreach($project->priorities as $key => $val)-->
                    <option value="{$val->priority_srl}" <!--@if($val->priority_srl==$oIssue->get('priority_srl'))-->selected="selected"<!--@end-->>{$val->title}</option>
                    <!--@end-->
                </select>
            </td>
        </tr>
        <tr>
            <th><label for="inputType">{$lang->type}</label></th>
            <td>
                <select name="type_srl" id="inputType">
                    <option value="">{$lang->type}</option>
                    <!--@foreach($project->types as $key => $val)-->
                    <option value="{$val->type_srl}" <!--@if($val->type_srl==$oIssue->get('type_srl'))-->selected="selected"<!--@end-->>{$val->title}</option>
                    <!--@end-->
                </select>
            </td>
        </tr>
        <tr>
            <th><label for="inputComponent">{$lang->component}</label></th>
            <td>
                <select name="component_srl" id="inputComponent">
                    <option value="">{$lang->component}</option>
                    <!--@foreach($project->components as $key => $val)-->
                    <option value="{$val->component_srl}" <!--@if($val->component_srl==$oIssue->get('component_srl'))-->selected="selected"<!--@end-->>{$val->title}</option>
                    <!--@end-->
                </select>
            </td>
        </tr>
        <!--@if(count($project->packages))-->
        <tr>
            <th><label for="inputPackage">{$lang->occured_version}</label></th>
            <td>
                <select name="package_srl" id="inputPackage">
                    <option value="">{$lang->package}</option>
                    <!--@foreach($project->packages as $key => $val)-->
                    <option value="{$val->package_srl}" <!--@if($val->package_srl==$oIssue->get('package_srl'))-->selected="selected"<!--@end-->>{$val->title}</option>
                    <!--@end-->
                </select>
                <select name="occured_version_srl">
                    <option value="">{$lang->release}</option>
                    <!--@foreach($project->packages as $key => $val)-->
                    <!--@foreach($project->releases as $k => $v)-->
                    <!--@if($val->package_srl == $v->package_srl)-->
                    <option value="{$v->release_srl}" <!--@if($v->release_srl==$oIssue->get('occured_version_srl'))-->selected="selected"<!--@end-->>{$v->title}</option>
                    <!--@end-->
                    <!--@end-->
                    <!--@end-->
                </select>
            </td>
        </tr>
        <!--@end-->
        <tr>
            <th><label>{$lang->action}</label></th>
            <td>
                <ul>
                    <li>
                        <input type="radio" name="action" value="resolve" id="actResolve" /><label for="actResolve">{$lang->cmd_resolve_as}</label>
                        <select name="status" onchange="xGetElementById('actResolve').checked='checked'">
                            <!--@foreach($lang->status_list as $key => $val)-->
                            <option value="{$key}" <!--@if($oIssue->get('status')==$key)-->selected="selected"<!--@end-->>{$val}</option>
                            <!--@end-->
                        </select>
                    </li>
                    <li>
                        <input type="radio" name="action" value="reassign" id="actReassign" /><label for="actReassign">{$lang->cmd_reassign}</label>
                        <select name="assignee_srl" onchange="xGetElementById('actReassign').checked='checked'">
                            <!--@foreach($commiters as $key => $val)-->
                            <option value="{$val->member_srl}" <!--@if($oIssue->get('assignee_srl')==$val->member_srl)-->selected="selected"<!--@end-->>{$val->nick_name} ({$val->user_id})</option>
                            <!--@end-->
                        </select>
                    </li>
                    <li><input type="radio" name="action" value="accept" id="actAccept" /><label for="actAccept">{$lang->cmd_accept}</label></li>
                </ul>
            </td>
        </tr>
        </table>
        <!--@end-->

        <div class="editor">{$oIssue->getCommentEditor()}</div>

        <!--@if(!$is_logged)-->
        <div class="editorOption">
           <input type="text" name="nick_name" class="inputText userName" value="{$lang->writer}" onfocus="this.value=''" />
           <input type="password" name="password" class="inputText userPw" value="{$lang->password}" onfocus="this.value=''" />
           <input type="text" name="email_address" class="inputText emailAddress" value="{$lang->email_address}" onfocus="this.value=''" />
           <input type="text" name="homepage" class="inputText homePage" value="{$lang->homepage}" onfocus="this.value=''" />
        </div>
        <!--@end-->
    
        <div class="issuetrackerNavigation">
            <span class="buttonOfficial"><input type="submit" value="{$lang->cmd_registration}" accesskey="s" /></span>
        </div>
    </div>

</form>
<!--@end-->
<!--@end-->

<!--#include("footer.html")-->
