<!--%import("filter/update_menu_title.xml")-->
<!--%import("filter/insert_menu_item.xml")-->
<!--%import("filter/delete_menu_item.xml")-->
<!--%import("filter/move_menu_item.xml")-->
<!--%import("js/menu_admin.js")-->

<!-- 메뉴 이동을 위해 임시로 사용하는 form -->
<form id="fo_move_menu" action="./" method="get">
    <input type="hidden" name="menu_id" />
    <input type="hidden" name="source_item_srl" />
    <input type="hidden" name="target_item_srl" />
</form>


<div style="margin-bottom:10px;">
    <!--@if($mid == 'admin')-->
        <table border="1" width="100%">
        <tr>
            <th>{$lang->title}</th>
            <td>
                <form action="./" method="get" onsubmit="return procFilter(this, update_menu_title)">
                    <input type="hidden" name="menu_srl" value="{$menu_info->menu_srl}" />
                    <input type="text" name="title" value="{htmlspecialchars($menu_info->title)}" />
                    <input type="submit" value="{$lang->cmd_modify}" />
                    <input type="button" value="{$lang->cmd_back}" onclick="location.href='{getUrl('act','dispMenuAdminContent')}';return false;" />
                </form>
            </td>
        </tr>
        <tr>
            <th>{$lang->menu_management}</th>
            <td>{nl2br($lang->about_menu_management)}</td>
        </tr>
        </table>
    <!--@else-->
        <table border="1" width="100%">
        <tr>
            <th>{$lang->title}</th>
            <td>{$menu_info->title}</td>
            <td><input type="button" value="{$lang->cmd_back}" onclick="location.href='{getUrl('act','')}';return false;" /></td>
        </tr>
        <tr>
            <th>{$lang->menu_management}</th>
            <td colspan="2">{nl2br($lang->about_menu_management)}</td>
        </tr>
        </table>
    <!--@end-->

    <form id="fo_menu" action="./" method="get" onsubmit="return procFilter(this, insert_menu_item)">
        <input type="hidden" name="title" value="{$menu_info->title}" />
        <input type="hidden" name="menu_srl" value="{$menu_info->menu_srl}" />
        <input type="hidden" name="xml_file" value="{$menu_info->xml_file}" />
        <input type="hidden" name="php_file" value="{$menu_info->php_file}" />

        <table border="1" width="100%">
        <col width="320" />
        <col width="*" />
        <tr valign="top">
            <td>
                <div id="menu_zone_menu"></div>
                <div>
                    <input type="checkbox" id="menu_enable_move" /> <label for="menu_enable_move">{$lang->cmd_enable_move_menu}</label>
                </div>
                <div>
                    <input type="button" value="{$lang->cmd_insert}" onclick="doInsertMenuItem(0);return false;" />
                    <input type="button" value="{$lang->cmd_open_all}" onclick="openAllTreeMenu('menu');return false;" />
                    <input type="button" value="{$lang->cmd_close_all}" onclick="closeAllTreeMenu('menu');return false;" />
                    <input type="button" value="{$lang->cmd_remake_cache}" onclick="doReloadTreeMenu('{$menu_info->menu_srl}');return false;" />
                </div>
            </td>
            <td>
                <div id="menu_zone_info"></div>
            </td>
        </tr>
        </table>

    </form>

    <script type="text/javascript">
        loadTreeMenu("{$menu_info->xml_file}", "menu", "menu_zone_menu", "{$menu_info->title}", doGetMenuItemInfo, 0, doMoveTree); 
    </script>
</div>
